# Dynamic File Search with Plugin Support

## Описание проекта

Консольная утилита на C для Linux, реализующая рекурсивный поиск файлов с динамическими плагинами. Обход файловой системы осуществляется через `nftw()`. Архитектура позволяет подключать любое количество плагинов с собственными критериями фильтрации.

### Основные компоненты

- **lab12msN3246**  
  - Парсинг базовых опций командной строки (`getopt`)  
  - Загрузка плагинов из каталога (`dlopen`)  
  - Объединение условий плагинов в режимах AND, OR, инверсия результата  
  - Рекурсивный обход директорий через `nftw()` и фильтрация файлов

- **Плагин `libmsN3246.so`**  
  - Поиск файлов с корректными 8-байтовыми номерами кредитных карт в BCD-формате  
  - Проверка алгоритмом Луна (little- и big-endian)  
  - Отладочный вывод при установке `LAB1DEBUG`

### Структура проекта

.
├── main.c # Точка входа, обработка опций, загрузка плагинов
├── utils.c # Вспомогательные функции: загрузка/выгрузка плагинов, nftw-обход
├── utils.h # Объявления глобальных переменных и функций
├── plugin_api.h # Интерфейс плагинов (структуры и API)
├── libmsN3246.c # Исходник плагина для поиска кредитных карт
├── Makefile # Сборка исполняемого файла и плагина
└── README.md # Документация

---

## Использование

```bash
./lab12msN3246 [опции] [каталог]
```
- каталог — стартовая директория для поиска (по умолчанию — текущая).

- Базовые опции:

  - -P <dir> — каталог плагинов

  - -A — объединение фильтров через AND

  - -O — объединение фильтров через OR

  - -N — инверсия результата

  - -v — вывод версии и автора

  - -h — справка

- Опции плагинов указываются как --<имя>=<значение> или --<имя> (флаги).
Пример: --ccards-bin включает проверку бинарных номеров карт.

## Сборка
```
make all
```

- Генерирует:

  - lab12msN3246 (исполняемый файл)

  - libmsN3246.so (плагин)

- Компилятор: gcc

- Флаги: -Wall -Wextra -Werror -O3 -D_XOPEN_SOURCE=700

- Линковка: -ldl

## Архитектурные особенности
- nftw() — эффективный рекурсивный обход с контролем глубины

- DL-система — плагины подключаются динамически, интерфейс описан в plugin_api.h

- Двухэтапный парсинг — сначала базовые опции, затем опции плагинов

- Логика фильтрации — поддержка AND, OR, инверсии

- Плагин кредитных карт — BCD-проверка, алгоритм Луна, поддержка обоих эндийностей

## Требования
- ОС Linux

- GCC (C99 или выше)

- Библиотеки: стандартная libc, libdl

- Для отладки: установить переменную LAB1DEBUG