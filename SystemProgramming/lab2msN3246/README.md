# üß™ Lab 2 ‚Äî TCP –ö–ª–∏–µ–Ω—Ç-–°–µ—Ä–≤–µ—Ä–Ω–æ–µ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –û–∫—Ä—É–≥–ª–µ–Ω–∏—è –ß–∏—Å–µ–ª

## üìÑ –û–ø–∏—Å–∞–Ω–∏–µ

–ö–ª–∏–µ–Ω—Ç-—Å–µ—Ä–≤–µ—Ä–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —è–∑—ã–∫–µ **C** –¥–ª—è **Linux**, —Ä–µ–∞–ª–∏–∑—É—é—â–µ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –ø–æ **TCP** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è —á–∏—Å–µ–ª. –°–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ **–º–Ω–æ–≥–æ–ø—Ä–æ—Ü–µ—Å—Å–Ω–æ–º —Ä–µ–∂–∏–º–µ** —á–µ—Ä–µ–∑ `fork()`. –ü—Ä–æ–≥—Ä–∞–º–º–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–ª–∏–µ–Ω—Ç—É –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫ —á–∏—Å–µ–ª –∏ –≤—ã–±—Ä–∞—Ç—å –º–µ—Ç–æ–¥ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è: `FLOOR`, `CEIL`, `TRUNC`.

---

## üì¶ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### üîß –°–µ—Ä–≤–µ—Ä (`lab2msN3246_server`)
- –°–ª—É—à–∞–µ—Ç IP –∏ –ø–æ—Ä—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `127.0.0.1:7777`)
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö
- –ü–æ–ª—É—á–∞–µ—Ç –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞:
  - —Å—Ç—Ä–æ–∫—É —Å –≤–µ—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ —á–∏—Å–ª–∞–º–∏ (—á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª/—Ç–∞–±—É–ª—è—Ü–∏—é),
  - —Å—Ç—Ä–æ–∫—É —Å —Ä–µ–∂–∏–º–æ–º –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
  - —Å—Ç—Ä–æ–∫—É —Å –æ–∫—Ä—É–≥–ª—ë–Ω–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏,
  - –ª–∏–±–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ `ERROR N`
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞:
  - –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (`-l`, `LAB2LOGFILE`),
  - –¥–µ–º–æ–Ω–∏–∑–∞—Ü–∏–∏ (`-d`),
  - –æ—Ç–ª–∞–¥–∫–∏ (`LAB2DEBUG`),
  - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —á–µ—Ä–µ–∑ —Å–∏–≥–Ω–∞–ª—ã

### üßë‚Äçüíª –ö–ª–∏–µ–Ω—Ç (`lab2msN3246_client`)
- –ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É –ø–æ IP/–ø–æ—Ä—Ç—É
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ (—Å–ø–∏—Å–æ–∫ —á–∏—Å–µ–ª –∏ —Ä–µ–∂–∏–º –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è)
- –ü–æ–ª—É—á–∞–µ—Ç –∏ –≤—ã–≤–æ–¥–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–µ –∂–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è, —á—Ç–æ –∏ —Å–µ—Ä–≤–µ—Ä

---

## ‚öôÔ∏è –û–ø—Ü–∏–∏ –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| –ü–∞—Ä–∞–º–µ—Ç—Ä CLI     | –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è        | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                              | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é | –ü—Ä–∏–º–µ–Ω–∏–º–æ –∫     |
|------------------|-------------------|------------------------------------------|------------------------|-----------------|
| `-a <ip>`        | `LAB2ADDR`        | IP-–∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞                         | `127.0.0.1`            | –ö–ª–∏–µ–Ω—Ç, –°–µ—Ä–≤–µ—Ä  |
| `-p <port>`      | `LAB2PORT`        | TCP-–ø–æ—Ä—Ç                                 | `7777`                 | –ö–ª–∏–µ–Ω—Ç, –°–µ—Ä–≤–µ—Ä  |
| `-w <N>`         | `LAB2WAIT`        | –ó–∞–¥–µ—Ä–∂–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–ª–∏–µ–Ω—Ç–∞ (—Å–µ–∫)         | `0`                    | –°–µ—Ä–≤–µ—Ä          |
| `-d`             | ‚Äî                 | –ó–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–æ–≤–æ–º (–¥–µ–º–æ–Ω) —Ä–µ–∂–∏–º–µ          | ‚Äî                      | –°–µ—Ä–≤–µ—Ä          |
| `-l <path>`      | `LAB2LOGFILE`     | –ü—É—Ç—å –∫ –ª–æ–≥-—Ñ–∞–π–ª—É                         | `/tmp/lab2.log`        | –°–µ—Ä–≤–µ—Ä          |
| `-v`             | ‚Äî                 | –í—ã–≤–æ–¥ –≤–µ—Ä—Å–∏–∏                             | ‚Äî                      | –ö–ª–∏–µ–Ω—Ç, –°–µ—Ä–≤–µ—Ä  |
| `-h`             | ‚Äî                 | –í—ã–≤–æ–¥ —Å–ø—Ä–∞–≤–∫–∏                            | ‚Äî                      | –ö–ª–∏–µ–Ω—Ç, –°–µ—Ä–≤–µ—Ä  |
| ‚Äî                | `LAB2DEBUG`       | –í–∫–ª—é—á–∏—Ç—å –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è            | ‚Äî                      | –ö–ª–∏–µ–Ω—Ç, –°–µ—Ä–≤–µ—Ä  |

---

## üì° –ü—Ä–æ—Ç–æ–∫–æ–ª –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

**–ó–∞–ø—Ä–æ—Å –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞**:
```
<—á–∏—Å–ª–∞ —á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª –∏–ª–∏ —Ç–∞–±—É–ª—è—Ü–∏—é>\n
<—Ä–µ–∂–∏–º –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è: FLOOR | CEIL | TRUNC>\n
```

**–û—Ç–≤–µ—Ç –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞**:
```
<–æ–∫—Ä—É–≥–ª—ë–Ω–Ω—ã–µ —á–∏—Å–ª–∞ —á–µ—Ä–µ–∑ –ø—Ä–æ–±–µ–ª>\n
```
–∏–ª–∏
```
ERROR N\n
```

---

## üõ†Ô∏è –°–±–æ—Ä–∫–∞

```bash
make all
```
üßæ Makefile
```
makefile
–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å
–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
CC = gcc
CFLAGS = -Wall -Wextra -Werror -O3
LDFLAGS = -lm
TARGETS = lab2msN3246_client lab2msN3246_server

.PHONY: all clean

all: $(TARGETS)

%: %.c
	$(CC) $(CFLAGS) -o $@ $^ $(LDFLAGS)

clean:
	rm -f $(TARGETS)
```

üöÄ –ü—Ä–∏–º–µ—Ä –∑–∞–ø—É—Å–∫–∞
–°–µ—Ä–≤–µ—Ä:
```
./lab2msN3246_server -d -l /tmp/lab2.log -a 127.0.0.1 -p 7777
```
–ö–ª–∏–µ–Ω—Ç:
```
./lab2msN3246_client -a 127.0.0.1 -p 7777
```
–í–≤–æ–¥:
```
1.5 2.6e0 -3.2
FLOOR
```
–í—ã–≤–æ–¥:
```
1 2 -4
```
‚úÖ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- –û–°: Linux

- –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä: GCC —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π C99+

- –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã: make, valgrind (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏: libm, libc

*üìå –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–∞ –≤ —Ä–∞–º–∫–∞—Ö –∫—É—Ä—Å–∞ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –∏ —Å–µ—Ç–µ–≤–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è. –û—Å–Ω–æ–≤–Ω–æ–π –∞–∫—Ü–µ–Ω—Ç ‚Äî –Ω–∞ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ TCP-–ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤, –æ–±—Ä–∞–±–æ—Ç–∫–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π, —Ä–∞–±–æ—Ç–µ —Å –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.*
