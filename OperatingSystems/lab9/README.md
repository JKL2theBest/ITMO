# Тестирование TCP Socket Options и Проект с Аутентификацией RPC

## Обзор

Проект состоит из двух частей:

1. **Тестирование опций TCP сокетов**  
   Набор Python-скриптов (`server.py` и `client.py`) для проверки поведения TCP-сокетов и производительности при различных конфигурациях `setsockopt`.

2. **RPC-программа с поддержкой аутентификации**  
   RPC-сервис на C, реализующий удалённые арифметические операции с поддержкой аутентификации, используя XDR и RPC-биндинги.

---

## Часть 1: Тестирование опций TCP сокетов

### Цель

Оценить влияние различных опций TCP сокетов на поведение соединения и скорость передачи данных.

### Компоненты

- **server.py**  
  TCP-сервер на `127.0.0.1:8080`, принимающий клиентские подключения и возвращающий полученные данные.

- **client.py**  
  TCP-клиент, подключающийся к серверу и отправляющий несколько сообщений с разными настройками сокетов. Измеряет и сравнивает среднее время передачи для различных конфигураций `setsockopt`.

### Тестируемые опции сокета

- `SO_REUSEADDR` — разрешает повторное использование адреса для быстрого перепривязывания.
- `SO_KEEPALIVE` — посылает периодические keep-alive пакеты для поддержания активного соединения.
- `TCP_NODELAY` — отключает алгоритм Нейгла, обеспечивая немедленную отправку мелких пакетов для снижения задержек.

### Рабочий процесс

1. Клиент перебирает все комбинации указанных опций.
2. Для каждой комбинации отправляет фиксированное количество сообщений, измеряя время «туда-обратно».
3. Результаты усредняются и визуализируются в виде столбчатой диаграммы для анализа влияния на производительность.

### Ключевые функции

- Создание и настройка TCP сокетов с различными опциями.
- Точное измерение времени передачи.
- Визуализация результатов с помощью `matplotlib`.

---

## Часть 2: RPC-программа с поддержкой аутентификации

### Цель

Реализовать RPC-сервер для выполнения арифметических операций (`add`, `sub`, `mul`, `div`) над двумя числами с плавающей точкой, поддерживающий механизмы аутентификации.

### Технические особенности

- Использование протоколов **RPC/XDR** для межплатформенного взаимодействия.
- Регистрация программы через `rpcbind` для управления портами.
- Реализация серверных обработчиков арифметических функций.
- Клиентские stub-функции для вызова удалённых процедур.
- Описание интерфейса и структур данных в `.x` IDL-файле.
- Компиляция с помощью `rpcgen` и линковка с `libtirpc` и `libnsl`.
- Интеграция базовых механизмов аутентификации RPC.

### Компоненты

- **IDL.x** — IDL-файл с описанием структуры `values` и программы `COMPUTE` с арифметическими функциями.
- **IDL_server.c** — реализация серверных функций.
- **IDL_client.c** — клиент для удалённого вызова операций.
- Демон RPC-сервера, регистрируемый в `rpcbind`.

### Использование

- Компиляция серверных и клиентских программ с помощью GCC.
- Запуск службы `rpcbind`.
- Запуск сервера для прослушивания RPC-запросов.
- Клиент отправляет операнды и запрашивает арифметические операции.
- Сервер вычисляет результат и возвращает его клиенту.

---

## Технические требования

- Python 3.x с библиотеками `numpy` и `matplotlib` для тестирования TCP.
- Linux с установленным и запущенным `rpcbind`.
- Девелоперские библиотеки: `libtirpc-dev`, `libnsl-dev`.
- Утилита `rpcgen` для генерации RPC-стабов.
- GCC для компиляции C-кода.

---

## Итоги

Проект демонстрирует:

- Практическое влияние опций TCP сокетов на производительность сетевого взаимодействия.
- Создание и тестирование клиент-серверных приложений с разными настройками сокетов.
- Разработку распределённого RPC-сервиса с поддержкой аутентификации.
- Использование XDR для платформонезависимой сериализации данных.
- Взаимодействие с системными сервисами, такими как `rpcbind`, для управления RPC-портами.

---

## Структура репозитория

/tcp_socket_test/
├── server.py # TCP сервер
├── client.py # TCP клиент с тестами и графиками
/rpc_compute/
├── IDL.x # IDL описание RPC интерфейса
├── IDL_server.c # Реализация RPC сервера
├── IDL_client.c # Клиент RPC
├── IDL_xdr.c # Сгенерированный XDR код
├── IDL_svc.c # Сгенерированные серверные стабы
├── IDL_clnt.c # Сгенерированные клиентские стабы
